{"ast":null,"code":"import axios from \"axios\";\nimport { toast } from \"../components/Toast/Toast\";\nimport { removeToken } from \"../Helpers/storageHelper\";\nimport { AUTH_TOKEN_KEY } from \"../constant\";\nexport { _fetch as fetch };\n\nfunction handleError(error, reject) {\n  if (!error) {// toast.error(\"Something went wrong, Please try again\");\n  }\n\n  if (error) {\n    if (error.data === \"jwt expired\") {\n      toast.error(\"Session expired\");\n      setTimeout(() => {\n        localStorage.clear();\n        removeToken(AUTH_TOKEN_KEY);\n        window.location.reload();\n      }, 2000);\n    }\n\n    reject(error);\n    return;\n  }\n}\n\nfunction handleResponse(successs, resolve) {\n  resolve(successs);\n  return;\n}\n\nfunction setMehod(method, path, body, options, params) {\n  let config = {};\n\n  if (options) {\n    if (options.jwt) {\n      config.headers = {\n        \"api-access-token\": options.jwt\n      };\n    }\n  }\n\n  params = params ? \"?\" + new URLSearchParams(params).toString() : \"\";\n\n  if (method === \"get\" || method === \"delete\") {\n    return axios[method](`${path}${params}`, config);\n  }\n\n  if (method === \"post\" || method === \"put\") {\n    return axios[method](`${path}`, body, config);\n  }\n}\n\nfunction _fetch(method, path, body, options, params) {\n  return new Promise((resolve, reject) => {\n    return setMehod(method, path, body, options, params).then(function (response) {\n      handleResponse(response, resolve);\n      return;\n    }).catch(function (error) {\n      handleError(error.response, reject);\n      return;\n    });\n  });\n}","map":{"version":3,"names":["axios","toast","removeToken","AUTH_TOKEN_KEY","_fetch","fetch","handleError","error","reject","data","setTimeout","localStorage","clear","window","location","reload","handleResponse","successs","resolve","setMehod","method","path","body","options","params","config","jwt","headers","URLSearchParams","toString","Promise","then","response","catch"],"sources":["/data/test/saitaClientGit/src/services/Fetch.js"],"sourcesContent":["import axios from \"axios\";\nimport { toast } from \"../components/Toast/Toast\";\nimport { removeToken } from \"../Helpers/storageHelper\"\nimport { AUTH_TOKEN_KEY } from \"../constant\"\nexport { _fetch as fetch };\n\nfunction handleError(error, reject) {\n  if (!error) {\n    // toast.error(\"Something went wrong, Please try again\");\n  }\n  if (error) {\n    if (error.data === \"jwt expired\") {\n      toast.error(\"Session expired\");\n      setTimeout(() => {\n        localStorage.clear();\n        removeToken(AUTH_TOKEN_KEY);\n        window.location.reload();\n      }, 2000);\n\n    }\n    reject(error);\n    return;\n  }\n}\n\nfunction handleResponse(successs, resolve) {\n  resolve(successs);\n  return;\n}\n\nfunction setMehod(method, path, body, options, params) {\n  let config = {};\n  if (options) {\n    if (options.jwt) {\n      config.headers = {\n        \"api-access-token\": options.jwt\n      };\n    }\n  }\n  params = params ? \"?\" + new URLSearchParams(params).toString() : \"\";\n  if (method === \"get\" || method === \"delete\") {\n    return axios[method](`${path}${params}`, config);\n  }\n  if (method === \"post\" || method === \"put\") {\n    return axios[method](`${path}`, body, config);\n  }\n}\n\nfunction _fetch(method, path, body, options, params) {\n  return new Promise((resolve, reject) => {\n    return setMehod(method, path, body, options, params)\n      .then(function (response) {\n        handleResponse(response, resolve);\n        return;\n      })\n      .catch(function (error) {\n        handleError(error.response, reject);\n        return;\n      });\n  });\n}\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,2BAAtB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,cAAT,QAA+B,aAA/B;AACA,SAASC,MAAM,IAAIC,KAAnB;;AAEA,SAASC,WAAT,CAAqBC,KAArB,EAA4BC,MAA5B,EAAoC;EAClC,IAAI,CAACD,KAAL,EAAY,CACV;EACD;;EACD,IAAIA,KAAJ,EAAW;IACT,IAAIA,KAAK,CAACE,IAAN,KAAe,aAAnB,EAAkC;MAChCR,KAAK,CAACM,KAAN,CAAY,iBAAZ;MACAG,UAAU,CAAC,MAAM;QACfC,YAAY,CAACC,KAAb;QACAV,WAAW,CAACC,cAAD,CAAX;QACAU,MAAM,CAACC,QAAP,CAAgBC,MAAhB;MACD,CAJS,EAIP,IAJO,CAAV;IAMD;;IACDP,MAAM,CAACD,KAAD,CAAN;IACA;EACD;AACF;;AAED,SAASS,cAAT,CAAwBC,QAAxB,EAAkCC,OAAlC,EAA2C;EACzCA,OAAO,CAACD,QAAD,CAAP;EACA;AACD;;AAED,SAASE,QAAT,CAAkBC,MAAlB,EAA0BC,IAA1B,EAAgCC,IAAhC,EAAsCC,OAAtC,EAA+CC,MAA/C,EAAuD;EACrD,IAAIC,MAAM,GAAG,EAAb;;EACA,IAAIF,OAAJ,EAAa;IACX,IAAIA,OAAO,CAACG,GAAZ,EAAiB;MACfD,MAAM,CAACE,OAAP,GAAiB;QACf,oBAAoBJ,OAAO,CAACG;MADb,CAAjB;IAGD;EACF;;EACDF,MAAM,GAAGA,MAAM,GAAG,MAAM,IAAII,eAAJ,CAAoBJ,MAApB,EAA4BK,QAA5B,EAAT,GAAkD,EAAjE;;EACA,IAAIT,MAAM,KAAK,KAAX,IAAoBA,MAAM,KAAK,QAAnC,EAA6C;IAC3C,OAAOpB,KAAK,CAACoB,MAAD,CAAL,CAAe,GAAEC,IAAK,GAAEG,MAAO,EAA/B,EAAkCC,MAAlC,CAAP;EACD;;EACD,IAAIL,MAAM,KAAK,MAAX,IAAqBA,MAAM,KAAK,KAApC,EAA2C;IACzC,OAAOpB,KAAK,CAACoB,MAAD,CAAL,CAAe,GAAEC,IAAK,EAAtB,EAAyBC,IAAzB,EAA+BG,MAA/B,CAAP;EACD;AACF;;AAED,SAASrB,MAAT,CAAgBgB,MAAhB,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoCC,OAApC,EAA6CC,MAA7C,EAAqD;EACnD,OAAO,IAAIM,OAAJ,CAAY,CAACZ,OAAD,EAAUV,MAAV,KAAqB;IACtC,OAAOW,QAAQ,CAACC,MAAD,EAASC,IAAT,EAAeC,IAAf,EAAqBC,OAArB,EAA8BC,MAA9B,CAAR,CACJO,IADI,CACC,UAAUC,QAAV,EAAoB;MACxBhB,cAAc,CAACgB,QAAD,EAAWd,OAAX,CAAd;MACA;IACD,CAJI,EAKJe,KALI,CAKE,UAAU1B,KAAV,EAAiB;MACtBD,WAAW,CAACC,KAAK,CAACyB,QAAP,EAAiBxB,MAAjB,CAAX;MACA;IACD,CARI,CAAP;EASD,CAVM,CAAP;AAWD"},"metadata":{},"sourceType":"module"}